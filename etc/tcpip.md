# IP (Internet Protocol)
* 송신 호스트와 수신 호스트가 패킷 교환 네트워크에서 정보를 주고받는 데 사용하는 정부 위주의 규약이다.
* OSI 모형에서 3번째 계층인 네트워크계층(Network Layer)에서 호스트의 주소지정과 패킷 분할 및 조립 기능을 담당한다.
* 비신뢰성(unreliability, 흐름에 관여하지 않기 때문에 보낸 정보가 제대로 갔는지 보장하지 않는다.), 비연결셩(connectionlessness) 이 특징이다. 

### 개발동기
1960년대에는 장비 제조사마다 각기 다른 프로토콜을 사용하고 있었고 다른 회사 장비와는 통신이 힘들거나 불가능했다. 이 때문에 관련 프로토콜을 국제적으로 표준화하기 위한 ISO 위원회가 발족되어 1977년에 OSI 7계층 모델을 발표한다. IP는 OSI Layer 3 Network Layer 에 위치하는 프로토콜이다. 

**Q.** Internet Protocol Suite 4계층 이라는 게 있던데?
**A.** IETF 에서 인터넷 통신을 위한 프로토콜을 만들고 있던 중 독자적으로 Internet Protocol Suite 를 발표하였다. ISO 의 X.200(?) 이 이해관계자들 사이의 다툼으로 지연되는 사이 TCP/IP 가 사실상 표준이 되었다. OSI 7계층과 Internet Protocol Suite 는 비슷하긴 하지만 완전 같지는 않다. 

### IP주소
IP 통신에 필요한 고유 주소. IPv4 와 IPv6 가 있다.
* IPv4 : 32비트의 값을 가진다. 8비트씩 끊어 0~255의 10진수 숫자로 나타내며 (.)으로 구분한다. 211년 2월 5일 공인IP주소는 모두 고갈된 상태이다.
* IPv6 : IPv4 가 고갈됨에 따라 고안된 새로운 형태의 IP주소. 128비트의 값을 가진다. 4자리의 16진수 숫자 8개로 표기하고 각각 (:)으로 구분한다.
##### 공인IP주소
공인 IP란 실제로 다른 컴퓨터와 통신할 때 쓰이는 IP 주소이다. 아이피 주소를 관리하는 기관에 사용권을 요청하여 할당을 받아 사용할 수 있다. 현재 IANA(Internet Assigned Numbers Authority) 에서 전세계의 아이피 주소를 관리하고 있으며 효율적인 관리를 위해 피라미드형 체계로 구축되어 있다.
> IANA > 각 대륙별 아이피 주소 관리 기관 > 각국의 아이피 주소 관리 기관 > ISP
위의 순서대로 IP를 할당받을 수 있다.
##### 사설IP주소
IP주소를 할당받으려면 비용을 지불해야 하는데 그 수가 늘어날수록 비용이 올라간다. 그렇기 때문에 흔히 사용되는 방법이 내부의 사설 네트워크를 구축하는 방식이다. 간단히 공유기를 쓴다고 생각하면 된다. 일부 사람들의 경우 현재 부족한 IPv4를 효과적으로 사용할 수 있는 아주 긍정적인 방법으로 평가하기도 한다.

---
# TCP (Transmission Control Protocol)
* 근거리 통신망이나 인트라넷, 인터넷에 연결된 컴퓨터에서 실행되는 프로그램 간 옥텟(=바이트)을 안정적으로, 순서대로, 에러없이 교환할 수 있게 한다.
* OSI 모형에서 4번째 계층인 전송계층(Transport Layer)에서 사용하는 규약.
* 웹브라우저 들이 월드와이드웹 에서 서버에 연결할 때 사용되며, 이메일 전송이나 파일 전송에도 사용된다.

### 개발동기
미군에서 원래 사용하던 통신방식은 회선교환 방식이었다. 이는 이미 이동경로를 정해놓고 통신하는 방식이기 때문에 중간에 선 하나만 끊어져도 통신이 끊어지는 상황이 발생한다. 이에 따라 사용된 것이 패킷 교환 방식인데 이 방식은 딱히 경로를 정해놓지 않고 회선이 끊어져 있다면 다른 회선을 통해 우회하여 도착할 수 있도록 하는 방식이었다. 이로 인헤 통신이 끊어지지 않고 계속될 수 있는 환경을 구축하였지만 어떻게든 회선을 유지하도록 하는 것이 목적이었으므로 안정성이 떨어지게 된다. 이로 인해 데이터가 중간에 유실되거나 너무 늦게 도달하는 등 신뢰성이 떨어지는 문제점이 발생하여 신뢰성을 보장하기 위해 통신규약을 연구하게 되었고 이에 따라 나온 것이 TCP 이다.

**Q.** 왜 데이터가 유실될 수 있나?
**A.** 패킷교환 방식은 하나의 파일을 작은 크기의 데이터들로 나누어 전송한다. 개별 데이터에는 발신지 주소, 목적지 주소가 추가되어 하나의 단일 패킷이 된다. 이런 패킷들의 나열(sequence)은 차례로 목적지까지 보내지고, 목적지에서는 다시 원본 파일로 재구성하는 작업이 이루어진다. 원본파일이 분할되기 때문에 통신규약이 분명하지 않으면 받는 쪽에서 데이터를 잘 받았는지 보낸 쪽에서 알 수가 없어 받는 쪽에서 데이터 누락이 있어도 알 수 있는 방법이 없다.

**Q.** 이를 제어하기 위한 TCP 의 방법은?
**A.** TCP 헤더파일 중 확인응답(Acknowledge)파일이 존재한다. 이 파일은 UDP 와 구분되는 것으로 송수신시 계속 확인응답을 보내어 잘 갔는지, 잘 왔는지 확인하는 용도로 사용된다. 

### 전송과정
##### Three Way Handshake - 연결설정
* 전화를 거는 것처럼 상대와 연결을 설정하고 통신을 시작한다.
> 1. 상대에게 통신을 하고 싶다는 메세지를 보낸다. (SYN)
> 2. 상대는 그 메세지에 대한 응답 + 나도 통신 준비가 되었다는 메세지를 보낸다. (SYN-ACK)
> 3. 2번에서 받은 메세지에 응답을 보낸다. (ACK)
* 이와 같은 과정을 통해 나와 상대가 통신준비를 마쳤고, **현재 통신이 연결되어 있음을 보장**하게 된다.
##### 데이터 주고받기
패킷 교환 방식이기 때문이 데이터가 분할되어 전송된다. 이 때 어디까지 수신되었는지를 확인하기 위한 파일로 TCP의 헤더파일 중에 확인응답(Acknowledge)파일이 존재한다. (UDP와는 다른 점) 이것으로 송수신시 계속 확인응답을 보내여 잘 갔는지, 잘 받았는지 확인하기 때문에 **신뢰도**가 높다. (속도는 느림)
##### 혼잡제어(Congestion Control)
초기 TCP 는 사용량이 많아지면 부하를 감당하지 못하고 사망하였다. 이를 방지하기 위하여 TCP 에서는 데이터를 보내다가 상대가 데이터를 제대로 받지 못한 것이 확인되면 보내는 양을 대폭 줄여서 보내고 슬금슬금 보내는 양을 늘렸다가 다시 제대로 받지 못하면 양을 줄이는 방법을 선택하였다. 이 방법으로 모든 사용자들이 네트워크 상황에 따라 속도를 조절할 수 있게 되었으며 사용자가 늘어나면 속도가 느려지긴 해도 죽지는 않게 만들었다.

